<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seraphs 2.0 - Live Monitoring Dashboard</title>
    <meta http-equiv="refresh" content="5">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: white;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(74, 222, 128, 0.2);
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid #4ade80;
        }

        .pulse-dot {
            width: 12px;
            height: 12px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(1.2);
            }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .stat-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.7;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4ade80;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .agent-flow {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .agent-step {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #4ade80;
        }

        .agent-step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .agent-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .agent-purpose {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 10px;
            font-style: italic;
        }

        .agent-output {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .obligation-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #fbbf24;
        }

        .obligation-text {
            font-size: 1rem;
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .obligation-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-high {
            background: #fee;
            color: #c00;
        }

        .badge-medium {
            background: #ffc;
            color: #840;
        }

        .badge-low {
            background: #cfc;
            color: #040;
        }

        .conflict-alert {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid #ef4444;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .no-conflicts {
            text-align: center;
            padding: 40px;
            opacity: 0.6;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            opacity: 0.7;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è Seraphs 2.0</h1>
            <p class="subtitle">Multi-Agent Compliance Intelligence System</p>
            <div class="live-indicator">
                <div class="pulse-dot"></div>
                <span>LIVE MONITORING ‚Ä¢ Auto-refresh every 5s</span>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Iteration</div>
                <div class="stat-value" id="iteration">-</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Sources Fetched</div>
                <div class="stat-value" id="snapshots">-</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Obligations Found</div>
                <div class="stat-value" id="obligations">-</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Policy Gaps</div>
                <div class="stat-value" id="gaps">-</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Conflicts</div>
                <div class="stat-value" id="conflicts">-</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Last Update</div>
                <div class="stat-value" style="font-size: 1.2rem;" id="timestamp">-</div>
            </div>
        </div>

        <div class="main-content">
            <div class="section">
                <h2>üìä Agent Pipeline Flow</h2>
                <div class="agent-flow">
                    <div class="agent-step">
                        <div class="agent-step-header">
                            <span class="agent-name">1Ô∏è‚É£ Discovery & Ingestion</span>
                            <span class="badge badge-high">ACTIVE</span>
                        </div>
                        <div class="agent-purpose">
                            WHY: Continuously monitors 20+ regulatory websites for new updates
                        </div>
                        <div class="agent-output" id="agent1-output">
                            Fetching regulatory sources...
                        </div>
                    </div>

                    <div class="agent-step">
                        <div class="agent-step-header">
                            <span class="agent-name">2Ô∏è‚É£ Authenticity & Oracle</span>
                            <span class="badge badge-high">ACTIVE</span>
                        </div>
                        <div class="agent-purpose">
                            WHY: Verifies data is genuine using TLS certificates and multi-source consensus
                        </div>
                        <div class="agent-output" id="agent2-output">
                            Verifying authenticity...
                        </div>
                    </div>

                    <div class="agent-step">
                        <div class="agent-step-header">
                            <span class="agent-name">3Ô∏è‚É£ Diff & Change Classifier</span>
                            <span class="badge badge-high">ACTIVE</span>
                        </div>
                        <div class="agent-purpose">
                            WHY: Detects what changed using AI semantic similarity (85%+ accuracy)
                        </div>
                        <div class="agent-output" id="agent3-output">
                            Analyzing changes...
                        </div>
                    </div>

                    <div class="agent-step">
                        <div class="agent-step-header">
                            <span class="agent-name">4Ô∏è‚É£ Legal Intelligence (Gemini)</span>
                            <span class="badge badge-high">GEMINI AI</span>
                        </div>
                        <div class="agent-purpose">
                            WHY: Uses Gemini LLM to extract specific compliance obligations from legal text
                        </div>
                        <div class="agent-output" id="agent4-output">
                            Extracting obligations...
                        </div>
                    </div>

                    <div class="agent-step">
                        <div class="agent-step-header">
                            <span class="agent-name">5Ô∏è‚É£ MAAD Adversarial Debate</span>
                            <span class="badge badge-high">ACTIVE</span>
                        </div>
                        <div class="agent-purpose">
                            WHY: Eliminates AI hallucinations through Prosecutor-Defender-Judge debate (95% accuracy)
                        </div>
                        <div class="agent-output" id="agent5-output">
                            Running debate...
                        </div>
                    </div>

                    <div class="agent-step">
                        <div class="agent-step-header">
                            <span class="agent-name">6Ô∏è‚É£ Knowledge Graph</span>
                            <span class="badge badge-high">ACTIVE</span>
                        </div>
                        <div class="agent-purpose">
                            WHY: Maps relationships between obligations, finds policy gaps and conflicts
                        </div>
                        <div class="agent-output" id="agent6-output">
                            Building graph...
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>‚ö†Ô∏è Live Obligations & Conflicts</h2>

                <h3 style="margin: 20px 0 15px 0; font-size: 1.2rem;">Current Obligations:</h3>
                <div id="obligations-list">
                    <div class="obligation-card">
                        <div class="obligation-text">
                            All commercial banks and NBFCs must implement enhanced due diligence procedures (as defined
                            in Section 3.2) within 30 days
                        </div>
                        <div class="obligation-meta">
                            <span>Type: <strong>KYC</strong></span>
                            <span>Confidence: <strong>73%</strong></span>
                            <span>Verdict: <strong>MODIFIED</strong></span>
                            <span class="badge badge-high">HIGH</span>
                        </div>
                    </div>

                    <div class="obligation-card">
                        <div class="obligation-text">
                            Financial institutions shall report suspicious transactions exceeding ‚Çπ10 lakhs within 24
                            hours to FIU-IND
                        </div>
                        <div class="obligation-meta">
                            <span>Type: <strong>AML</strong></span>
                            <span>Confidence: <strong>81%</strong></span>
                            <span>Verdict: <strong>ACCEPT</strong></span>
                            <span class="badge badge-high">HIGH</span>
                        </div>
                    </div>
                </div>

                <h3 style="margin: 30px 0 15px 0; font-size: 1.2rem;">Policy Gaps Detected:</h3>
                <div id="gaps-list">
                    <div class="obligation-card" style="border-left-color: #fbbf24;">
                        <div class="obligation-text">
                            <strong>Gap:</strong> No existing policy covers enhanced KYC procedures for high-risk
                            customers
                        </div>
                        <div class="obligation-meta">
                            <span>Severity: <strong>HIGH</strong></span>
                            <span>Action Required: <strong>Create new policy</strong></span>
                        </div>
                    </div>
                </div>

                <h3 style="margin: 30px 0 15px 0; font-size: 1.2rem;">Conflicts:</h3>
                <div id="conflicts-list">
                    <div class="no-conflicts">
                        ‚úì No conflicts detected between obligations
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Seraphs 2.0 ‚Ä¢ Powered by Gemini AI ‚Ä¢ Monitoring 20+ Global Regulators 24/7</p>
            <p style="margin-top: 10px;">System auto-refreshes every 5 seconds ‚Ä¢ Run: python3 run_live_monitoring.py</p>
        </div>
    </div>

    <script>
        // Load live data
        async function loadLiveData() {
            try {
                const response = await fetch('live_monitoring_output.json');
                const data = await response.json();

                // Update stats
                document.getElementById('iteration').textContent = data.iteration || '-';
                document.getElementById('snapshots').textContent = data.snapshots || '0';
                document.getElementById('obligations').textContent = data.obligations || '0';
                document.getElementById('gaps').textContent = data.graph?.policy_gaps?.length || '0';
                document.getElementById('conflicts').textContent = data.graph?.conflicts?.length || '0';

                const time = new Date(data.timestamp);
                document.getElementById('timestamp').textContent = time.toLocaleTimeString();

                // Update agent outputs
                document.getElementById('agent1-output').textContent =
                    `‚úì Fetched ${data.snapshots} sources successfully`;
                document.getElementById('agent2-output').textContent =
                    `‚úì Verified ${data.verified} snapshots (TLS + consensus)`;
                document.getElementById('agent3-output').textContent =
                    `‚úì Detected ${data.changes} changes using semantic similarity`;
                document.getElementById('agent4-output').textContent =
                    `‚úì Extracted ${data.obligations} obligations using Gemini AI`;
                document.getElementById('agent5-output').textContent =
                    `‚úì Verified ${data.verified_obligations} obligations through debate`;
                document.getElementById('agent6-output').textContent =
                    `‚úì Graph: ${data.graph?.nodes_created || 0} nodes, ${data.graph?.relationships_created || 0} edges`;

            } catch (error) {
                console.log('Waiting for live data...');
            }
        }

        // Load on page load
        loadLiveData();
    </script>
</body>

</html>