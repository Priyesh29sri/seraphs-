#!/usr/bin/env python3
"""
Quick Deployment Script
Sets up Seraphs 2.0 with Gemini API and deploys for 24/7 monitoring
"""

import os

print("="*80)
print("SERAPHS 2.0 - QUICK DEPLOYMENT")
print("="*80 + "\n")

# Create .env file with Gemini API key
env_content = """# Seraphs 2.0 Production Configuration
# Generated by deploy.py

# Google Gemini API (Primary LLM)
GOOGLE_API_KEY=AIzaSyBW_QmbdaMZn-IPTISNTYpPcSYYeYOM4kM

# LLM Configuration - Using Latest Gemini
LLM_PRIMARY_PROVIDER=gemini
LLM_PRIMARY_MODEL=gemini-2.0-flash-exp
LLM_FALLBACK_MODEL=gemini-1.5-pro
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=8192

# Environment
ENVIRONMENT=production
LOG_LEVEL=INFO

# Scheduling (24/7 Monitoring)
ENABLE_SCHEDULER=true
SCHEDULER_TIMEZONE=Asia/Kolkata

# Infrastructure (Optional - Simulated for now)
REDIS_HOST=localhost
REDIS_PORT=6379
POSTGRES_HOST=localhost
POSTGRES_DB=seraphs

# Blockchain (Optional)
BLOCKFROST_NETWORK=mainnet
"""

print("Step 1: Creating .env file...")
with open('.env', 'w') as f:
    f.write(env_content)
print("âœ… .env file created with Gemini 2.0 Flash")

print("\nStep 2: Verifying Gemini API key...")
try:
    import google.generativeai as genai
    from dotenv import load_dotenv
    
    load_dotenv()
    api_key = os.getenv('GOOGLE_API_KEY')
    
    genai.configure(api_key=api_key)
    model = genai.GenerativeModel('gemini-2.0-flash-exp')
    
    # Test API
    response = model.generate_content("Say 'API working' in 2 words")
    print(f"âœ… Gemini API: {response.text.strip()}")
    print(f"âœ… Model: gemini-2.0-flash-exp")
    
except ImportError:
    print("âš ï¸  Install google-generativeai: pip install google-generativeai")
except Exception as e:
    print(f"âš ï¸  Gemini API test: {e}")
    print("   (This is normal if you haven't installed dependencies yet)")

print("\n" + "="*80)
print("DEPLOYMENT READY")
print("="*80)

print("\nðŸ“‹ Configuration:")
print("  âœ… Gemini API: Configured")
print("  âœ… Model: gemini-2.0-flash-exp (latest)")
print("  âœ… Fallback: gemini-1.5-pro")
print("  âœ… Timezone: Asia/Kolkata")
print("  âœ… Environment: Production")

print("\nðŸš€ Next Steps:")
print("\n1. Install dependencies:")
print("   pip install google-generativeai python-dotenv pyyaml apscheduler")
print("   pip install fastapi uvicorn  # For UI")

print("\n2. Test system:")
print("   python test_complete_system.py")

print("\n3. Start 24/7 monitoring:")
print("   python utils/scheduler.py")
print("   # OR in background:")
print("   nohup python utils/scheduler.py > scheduler.log 2>&1 &")

print("\n4. (Optional) Start UI:")
print("   python agents/agent_10_ui/api.py")
print("   # Then open: agents/agent_10_ui/dashboard.html")

print("\nðŸ’¡ Monitor logs:")
print("   tail -f scheduler.log")

print("\n" + "="*80)
print("System ready for deployment! ðŸŽ‰")
print("="*80 + "\n")
